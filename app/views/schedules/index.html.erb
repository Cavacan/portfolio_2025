<h1>Schedules</h1>

<%= render 'shared/schedule_form' %>

<br>

<div class="schedule-container">
  <h2>予定一覧</h2>
  <table class="schedule-table">
    <thead>
      <tr>
        <th>title</th>
        <th>notification_period</th>
        <th>next_notification</th>
        <th>after_next_notification</th>
        <th>staus</th>
        <th>command</th>
        <th>test</th>
      </tr>
    </thead>
    <tbody>
      <% @schedules.each do |schedule| %>
        <tr>
          <td><%= schedule.title %></td>
          <td><%= schedule.notification_period %></td>
          <td><%= schedule.next_notification.strftime("%Y/%-m/%-d") %></td>
          <td><%= schedule.after_next_notification.strftime("%Y/%-m/%-d") %></td>
          <td><%= schedule.status %></td>
          <td>
            <%= link_to '編集', edit_schedule_path(schedule), class: "btn btn-primary" %>
            <%= link_to '削除', archive_schedule_path(schedule), class: "btn btn-danger" %>
          </td>
          <td>
            <%= link_to "通知テスト", notification_schedule_path(schedule), class: "btn btn-info" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <br>

  <% if @schedules_archived.present? %>
  <h2>アーカイブ済み予定</h2>
  <table class="schedule-archived-table">
    <thead>
      <tr>
        <th>title</th>
        <th>notification_period</th>
        <th>next_notification</th>
        <th>after_next_notification</th>
        <th>staus</th>
      </tr>
    </thead>
    <tbody>
      <% @schedules_archived.each do |schedule| %>
        <tr>
          <td><%= schedule.title %></td>
          <td><%= schedule.notification_period %></td>
          <td><%= schedule.next_notification.strftime("%Y/%-m/%-d") %></td>
          <td><%= schedule.after_next_notification.strftime("%Y/%-m/%-d") %></td>
          <td><%= schedule.status %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <% end %>
</div>
